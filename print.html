<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Knowledge Base</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Knowledge Base</a></li><li class="chapter-item expanded "><a href="software-testing/index.html"><strong aria-hidden="true">2.</strong> Software Testing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="software-testing/srs.html"><strong aria-hidden="true">2.1.</strong> Software Requirements Specification</a></li><li class="chapter-item expanded "><a href="software-testing/white-box.html"><strong aria-hidden="true">2.2.</strong> White Box Testing</a></li><li class="chapter-item expanded "><a href="software-testing/black-box.html"><strong aria-hidden="true">2.3.</strong> Black Box Testing</a></li></ol></li><li class="chapter-item expanded "><a href="advanced-os/index.html"><strong aria-hidden="true">3.</strong> Advanced Operating Systems</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="advanced-os/booting.html"><strong aria-hidden="true">3.1.</strong> Booting</a></li><li class="chapter-item expanded "><a href="advanced-os/memory.html"><strong aria-hidden="true">3.2.</strong> Memory</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Knowledge Base</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="knowledge-base"><a class="header" href="#knowledge-base">Knowledge Base</a></h1>
<p>A hierarchically organized knowledge-base of things I am learning. Forever a <em>work in progress</em>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-testing"><a class="header" href="#software-testing">Software Testing</a></h1>
<p>Software Testing is closely coupled with Requirements Engineering and Software Verification, however this section mostly covers important testing techniques and construction of test plans as well as software requirements.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="srs"><a class="header" href="#srs">SRS</a></h1>
<p>An SRS document supplies the reader with all the necessary information to understand the Functional and Non-Functional Requirements. The following is a template:</p>
<h4 id="introduction"><a class="header" href="#introduction">Introduction</a></h4>
<ul>
<li>
<p><strong>Purpose</strong> -
Identify the product whose software requirements are specified in this document, including the
revision or release number. Describe the scope of the product that is covered by this SRS,
particularly if this SRS describes only part of the system or a single subsystem.</p>
</li>
<li>
<p><strong>Document Conventions</strong> -
Describe any standards or typographical conventions that were followed when writing this SRS,
such as fonts or highlighting that have special significance. For example, state whether priorities
for higher-level requirements are assumed to be inherited by detailed requirements, or whether
every requirement statement is to have its own priority.</p>
</li>
<li>
<p><strong>Intended Audience and Reading Suggestions</strong> -
Describe the different types of reader that the document is intended for, such as developers,
project managers, marketing staff, users, testers, and documentation writers. Describe what the
rest of this SRS contains and how it is organized. Suggest a sequence for reading the document,
beginning with the overview sections and proceeding through the sections that are most pertinent
to each reader type.</p>
</li>
<li>
<p><strong>Product Scope</strong> -
Provide a short description of the software being specified and its purpose, including relevant
benefits, objectives, and goals. Relate the software to corporate goals or business strategies. If a
separate vision and scope document is available, refer to it rather than duplicating its contents
here.</p>
</li>
<li>
<p><strong>References</strong> -
List any other documents or Web addresses to which this SRS refers. These may include user
interface style guides, contracts, standards, system requirements specifications, use case
documents, or a vision and scope document. Provide enough information so that the reader could
access a copy of each reference, including title, author, version number, date, and source or
location.</p>
</li>
</ul>
<h4 id="overall-description"><a class="header" href="#overall-description">Overall Description</a></h4>
<ul>
<li>
<p><strong>Product Perspective</strong> -
Describe the context and origin of the product being specified in this SRS. For example, state
whether this product is a follow-on member of a product family, a replacement for certain existing
systems, or a new, self-contained product. If the SRS defines a component of a larger system,
relate the requirements of the larger system to the functionality of this software and identify
interfaces between the two. A simple diagram that shows the major components of the overall
system, subsystem interconnections, and external interfaces can be helpful.</p>
</li>
<li>
<p><strong>Product Functions</strong> -
Summarize the major functions the product must perform or must let the user perform. Details
will be provided in Section 3, so only a high level summary (such as a bullet list) is needed here.
Organize the functions to make them understandable to any reader of the SRS. A picture of the
major groups of related requirements and how they relate, such as a top level data flow diagram
or object class diagram, is often effective.</p>
</li>
<li>
<p><strong>User Classes and Characteristics</strong> -
Identify the various user classes that you anticipate will use this product. User classes may be
differentiated based on frequency of use, subset of product functions used, technical expertise,
security or privilege levels, educational level, or experience. Describe the pertinent characteristics
of each user class. Certain requirements may pertain only to certain user classes. Distinguish the
most important user classes for this product from those who are less important to satisfy.</p>
</li>
<li>
<p><strong>Operating Environment</strong> -
Describe the environment in which the software will operate, including the hardware platform,
operating system and versions, and any other software components or applications with which it
must peacefully coexist.</p>
</li>
<li>
<p><strong>Design and Implementation Constraints</strong> -
Describe any items or issues that will limit the options available to the developers. These might
include: corporate or regulatory policies; hardware limitations (timing requirements, memory
requirements); interfaces to other applications; specific technologies, tools, and databases to be
used; parallel operations; language requirements; communications protocols; security
considerations; design conventions or programming standards (for example, if the customer’s
organization will be responsible for maintaining the delivered software).</p>
</li>
<li>
<p><strong>User Documentation</strong> -
List the user documentation components (such as user manuals, on-line help, and tutorials) that
will be delivered along with the software. Identify any known user documentation delivery formats
or standards.</p>
</li>
<li>
<p><strong>Assumptions and Dependencies</strong> -
List any assumed factors (as opposed to known facts) that could affect the requirements stated
in the SRS. These could include third-party or commercial components that you plan to use,
issues around the development or operating environment, or constraints. The project could be
affected if these assumptions are incorrect, are not shared, or change. Also identify any
dependencies the project has on external factors, such as software components that you intend
to reuse from another project, unless they are already documented elsewhere (for example, in the
vision and scope document or the project plan).</p>
</li>
</ul>
<h4 id="external-interface-requirements"><a class="header" href="#external-interface-requirements">External Interface Requirements</a></h4>
<ul>
<li>
<p><strong>User Interfaces</strong> -
Describe the logical characteristics of each interface between the software product and the
users. This may include sample screen images, any GUI standards or product family style guides
that are to be followed, screen layout constraints, standard buttons and functions (e.g., help) that
will appear on every screen, keyboard shortcuts, error message display standards, and so on.
Define the software components for which a user interface is needed. Details of the user interface
design should be documented in a separate user interface specification.</p>
</li>
<li>
<p><strong>Hardware Interfaces</strong> -
Describe the logical and physical characteristics of each interface between the software product
and the hardware components of the system. This may include the supported device types, the
nature of the data and control interactions between the software and the hardware, and
communication protocols to be used.</p>
</li>
<li>
<p><strong>Software Interfaces</strong> -
Describe the connections between this product and other specific software components (name
and version), including databases, operating systems, tools, libraries, and integrated commercial
components. Identify the data items or messages coming into the system and going out and
describe the purpose of each. Describe the services needed and the nature of communications.
Refer to documents that describe detailed application programming interface protocols. Identify
data that will be shared across software components. If the data sharing mechanism must be
implemented in a specific way (for example, use of a global data area in a multitasking operating
system), specify this as an implementation constraint.</p>
</li>
<li>
<p><strong>Communications Interfaces</strong> -
Describe the requirements associated with any communications functions required by this
product, including e-mail, web browser, network server communications protocols, electronic
forms, and so on. Define any pertinent message formatting. Identify any communication
standards that will be used, such as FTP or HTTP. Specify any communication security or
encryption issues, data transfer rates, and synchronization mechanisms.</p>
</li>
</ul>
<h4 id="system-features"><a class="header" href="#system-features">System Features</a></h4>
<ul>
<li><strong>System Feature 1</strong> -
<ul>
<li><strong>Description &amp; Priority</strong> -
Provide a short description of the feature and indicate whether it is of High,
Medium, or Low priority. You could also include specific priority component ratings,
such as benefit, penalty, cost, and risk (each rated on a relative scale from a low of
1 to a high of 9).</li>
<li><strong>Stimulus &amp; Response Sequences</strong> -
List the sequences of user actions and system responses that stimulate the
behavior defined for this feature. These will correspond to the dialog elements
associated with use cases.</li>
<li><strong>Functional Requirements</strong> -
Itemize the detailed functional requirements associated with this feature. These
are the software capabilities that must be present in order for the user to carry out
the services provided by the feature, or to execute the use case. Include how the
product should respond to anticipated error conditions or invalid inputs.
Requirements should be concise, complete, unambiguous, verifiable, and
necessary. Use “TBD” as a placeholder to indicate when necessary information is
not yet available.
<ul>
<li><strong>FR 1</strong> - ...</li>
<li><strong>FR 2</strong> - ...</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="other-nonfunctional-requirements"><a class="header" href="#other-nonfunctional-requirements">Other Nonfunctional Requirements</a></h4>
<ul>
<li>
<p><strong>Performance Requirements</strong> -
If there are performance requirements for the product under various circumstances, state them
here and explain their rationale, to help the developers understand the intent and make suitable
design choices. Specify the timing relationships for real time systems. Make such requirements as
specific as possible. You may need to state performance requirements for individual functional
requirements or features.</p>
</li>
<li>
<p><strong>Safety Requirements</strong> -
Specify those requirements that are concerned with possible loss, damage, or harm that could
result from the use of the product. Define any safeguards or actions that must be taken, as well
as actions that must be prevented. Refer to any external policies or regulations that state safety
issues that affect the product’s design or use. Define any safety certifications that must be
satisfied.</p>
</li>
<li>
<p><strong>Security Requirements</strong> -
Specify any requirements regarding security or privacy issues surrounding use of the product or
protection of the data used or created by the product. Define any user identity authentication
requirements. Refer to any external policies or regulations containing security issues that affect
the product. Define any security or privacy certifications that must be satisfied.</p>
</li>
<li>
<p><strong>Software Quality Attributes</strong> -
Specify any additional quality characteristics for the product that will be important to either the
customers or the developers. Some to consider are: adaptability, availability, correctness,
flexibility, interoperability, maintainability, portability, reliability, reusability, robustness, testability,
and usability. Write these to be specific, quantitative, and verifiable when possible. At the least,
clarify the relative preferences for various attributes, such as ease of use over ease of learning.</p>
</li>
<li>
<p><strong>Business Rules</strong> -
List any operating principles about the product, such as which individuals or roles can perform
which functions under specific circumstances. These are not functional requirements in
themselves, but they may imply certain functional requirements to enforce the rules.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="white-box-testing"><a class="header" href="#white-box-testing">White-Box Testing</a></h1>
<p>Performing tests on software with the source code available. Generally, one should follow the following methodology:</p>
<ol>
<li>Make a prioritized list of your "nightmares".</li>
<li>Which bugs can lead to the nightmares?</li>
<li>Apply testing techniques that are best suited for detecting these bugs.</li>
<li>Gather enough evidence to that there the likelihood of a nightmare scenario is negligible, at which point stop testing.</li>
</ol>
<p>Static Analysis is one of the most powerful tools, leveraging compilers and linting is a must.</p>
<h3 id="control-flow-testing"><a class="header" href="#control-flow-testing">Control-Flow Testing</a></h3>
<p>Testing coverage is a measure of completeness of the set of test cases and shows how much code has been exercised during testing.</p>
<ul>
<li>
<p><strong>Level 1 Statement Coverage</strong> - Weakest criteria, ensures that every statement in code has been executed at least once.</p>
</li>
<li>
<p><strong>Level 2 Decision Coverage</strong> - Ensures that the decision of all branches has been taken at least once. Includes statement coverage.</p>
</li>
<li>
<p><strong>Level 3 Condition Coverage</strong> - Ensures that every "simple" condition has been evaluated with both true and false. This doesn't mean that all "composite" conditions have been extensively evaluated.</p>
</li>
<li>
<p><strong>Level 4 Decision/Condition Coverage</strong> - All conditions and decisions is evaluated with both values. In this case decisions can be the composition of multiple conditions.</p>
</li>
<li>
<p><strong>Level 5 Multiple Condition Coverage</strong> - Requires that all combinations of "simple" conditions are covered.</p>
</li>
<li>
<p><strong>Level 6 Modified Condition/Decision Coverage</strong> - Requires that all decisions have been covered, that all simple conditions have been evaluated with both true and false, and that each simple condition within all compound conditions has been shown to independently effect outcome of the compound condition.</p>
</li>
<li>
<p><strong>Level 7 Full Path Coverage</strong> - Fully exhaustive white box testing, but tends to be infeasible.</p>
</li>
</ul>
<h3 id="data-flow-testing"><a class="header" href="#data-flow-testing">Data-Flow Testing</a></h3>
<p>The aim is to trim the set of test cases that we are interested in. Increases the chance of spending more time looking at paths that include potential software faults.</p>
<ul>
<li>All <em>Def-Use</em> Paths: test cases must exercise all paths that involve a definition and use of variables of interest.</li>
</ul>
<h3 id="test-adequacy"><a class="header" href="#test-adequacy">Test Adequacy</a></h3>
<p>When has a program been sufficiently tested? A test adequacy criterion such as Mutant Score, reveals how well our test cases are performing.</p>
<blockquote>
<p><strong>Definition:</strong>
A code mutant is a version of the software under test that underwent some form of mutation, for example, arithmetic operators have been replaced.</p>
</blockquote>
<p>Mutants can survive if their output is correct for any given test case. Survivors are analyzed to improve test cases. However, some (equivalent) mutants might never be killed. Mutant Score is defined as <code>#killed_mutants / #total_mutants</code>.</p>
<h3 id="unit-testing"><a class="header" href="#unit-testing">Unit Testing</a></h3>
<p>Testing an individual module / component of a system. In practice, this is testing of a single method or class. <a href="https://en.wikipedia.org/wiki/Unit_testing">(wiki)</a></p>
<h3 id="integration-testing"><a class="header" href="#integration-testing">Integration Testing</a></h3>
<p>Testing the multiple parts of the system as a group. Typically it follows after modules have been unit tested. <a href="https://en.wikipedia.org/wiki/Integration_testing">(wiki)</a></p>
<ul>
<li><em>big-bang</em> - modules are coupled together to form a complete system that is tested</li>
<li><em>top-down</em> - start with highest level module and then test step by step down incrementally</li>
<li><em>bottom-up</em> - start with the lowest level module, test your way up by integrating</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="black-box-testing"><a class="header" href="#black-box-testing">Black Box Testing</a></h1>
<p>Testing when the source code is not available.</p>
<h1 id="techniques"><a class="header" href="#techniques">Techniques</a></h1>
<h3 id="bva---boundary-value-analysis"><a class="header" href="#bva---boundary-value-analysis">BVA - Boundary Value Analysis</a></h3>
<p>For mechanisms that have input ranges, apply test cases that position themselves at the boundaries of those ranges. For each of the following test just above and just below:</p>
<ul>
<li>min</li>
<li>nominal</li>
<li>max</li>
</ul>
<h3 id="ep---equivalence-partitioning"><a class="header" href="#ep---equivalence-partitioning">EP - Equivalence Partitioning</a></h3>
<p>If the program creates classes from the input, make sure all classes are represented. Can be done by finding representative values in the input domain or the output domain. If there are multiple input variables there are the following:</p>
<ul>
<li>Unidimensional partition - only focus on one variable at a time and ignore the others.</li>
<li>Multidimensional partition - test all variables in all possible combinations</li>
</ul>
<h3 id="mbt---model-based-testing"><a class="header" href="#mbt---model-based-testing">MBT - Model Based Testing</a></h3>
<p>A model is made from requirements and generates test cases. Use different notations such as pre/post conditions.</p>
<ul>
<li>
<p>Input domain models: Combinatorial Design</p>
<ul>
<li>assist the design of the test cases and offer a significant reduction in the number of test cases</li>
</ul>
</li>
<li>
<p>Input domain models: Syntax Testing</p>
<ul>
<li>used to verify that a module that accepts input from another module does not fail when presented ill-formed input</li>
<li>The syntax is the model of the input, Inputs are specified in SRS using a grammar or a context-free language</li>
<li>used to test compilers!</li>
</ul>
</li>
<li>
<p>Behavior Models:</p>
<ul>
<li>Test the use cases, capture system's functional requirements from user's perspective</li>
<li>Decision Tables - used to concisely and completely show complex rules and their resulting actions: test cases can be
<ul>
<li>at least one test case for each rule</li>
<li>if the rule is a range of values combine DT and BVA</li>
</ul>
</li>
<li>Cause-effect graphs / dependency modeling - design test cases for functions that depend on a combination of more input items</li>
<li>State Machines - test cases should:
<ul>
<li>visit all states</li>
<li>trigger all events at least once</li>
<li>exercise all transitions</li>
<li>execute all paths at least once</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-operating-systems"><a class="header" href="#advanced-operating-systems">Advanced Operating Systems</a></h1>
<p>An operating system is comprised of many layers of abstraction where each layer generally takes on a different responsibility. At the lowest level is the <strong>kernel</strong> which interacts directly with the hardware and runs with the highest level of privilege. Then the kernel is wrapped in a <em>"shell"</em> of <strong>system software</strong>. These are user space programs that interact with the kernel and provide critical functionality. Lastly, there is an optional <strong>desktop environment</strong> that provides a graphical user interface, if the OS is being used directly by end users.</p>
<pre><code>     +--------------------------+
     |   Desktop Environment    |
     |  +--------------------+  |
     |  |  System Software   |  |
     |  |  +--------------+  |  |
     |  |  |    Kernel    |  |  |
     |  |  | +----------+ |  |  |
     |  |  | | Hardware | |  |  |
     +--------------------------+
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="genesis-x86-64"><a class="header" href="#genesis-x86-64">Genesis (x86-64)</a></h1>
<p>After pressing the power on button:</p>
<ol>
<li>CPU executes code in ROM.</li>
<li>Loads firmware BIOS, UEFI, Coreboot, OpenFirmware into memory</li>
<li>Initializes memory and other devices</li>
<li>Loads boot code into memory, traditionally first sector was boot code</li>
</ol>
<p>Traditional <strong>two-stage bootloader</strong> is there for historical reasons, since there were only 512bytes available for the first boot section. Thus, it must simply load the second stage boot code with more memory available.</p>
<h1 id="questions"><a class="header" href="#questions">Questions</a></h1>
<ul>
<li>When booting why is it required to go through all modes?</li>
<li>How is ROM code updated on older hardware?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="physical-memory"><a class="header" href="#physical-memory">Physical Memory</a></h1>
<p>The memory controller communicates on the BUS over different channels (usually 1 / 2), but only one <strong>channel</strong> can be active at a time. For each channel there are physical memory modules (<a href="https://en.wikipedia.org/wiki/DIMM">DIMMs</a>). One side of the <strong>DIMM</strong> is a <strong>rank</strong>, typically 1/2 ranks per DIMM. Each rank has a <strong>chip</strong>, with a number of <strong>rows and columns</strong>.</p>
<p>Linux organizes memory into consecutive page frames and grouped together in the following way:</p>
<ul>
<li>Nodes - <a href="https://en.wikipedia.org/wiki/Non-uniform_memory_access">NUMA</a> abstraction for N "banks"</li>
<li>Zones - tagged regions within each node</li>
<li>Pages - Physical page frames from each zone</li>
</ul>
<p>Linux Zone ranges:</p>
<ul>
<li>ZONE_DMA: 0 - 16MB <em>for legacy hardware</em></li>
<li>ZONE_DMA32: 16MB - 4GB <em>for legacy hardware</em></li>
<li>ZONE_NORMAL: 16MB - 896MB <em>for kernel - always mapped</em></li>
<li>ZONE_HIGHMEM: 896MB - END <em>used for kmap, on demand memory mapping x86</em></li>
</ul>
<p>Zones are managed independently, however boundaries become blurry when under pressure. Kernel daemon kswapd will reclaim memory when certain thresholds are crossed. Virtual memory mapping on x86-32 starts ZONE_DMA and ZONE_NORMAL directly after the PAGE_OFFSET and ZONE_HIGHMEM is mapped on demand. The PAGE_OFFSET is where the user space processes start. However, for x86-64 there are 47 bits of memory address space available, so it can simply map all zones into one continuous region.</p>
<h2 id="pages"><a class="header" href="#pages">Pages</a></h2>
<ul>
<li>4KB of physical memory</li>
<li><code>linux/mmzone.h</code> has mem_map array which holds page objects</li>
</ul>
<h1 id="allocators"><a class="header" href="#allocators">Allocators</a></h1>
<p>Linux has one main page allocator (Buddy allocator) which allocates contiguous areas of physical memory. All allocators custom to the kernel from different subsystems interact with it. The Memblock allocator is an early boot-time allocator, discarded after initialization and contains two simple data structures: all present memory and allocated memory regions. Memblock has the following procedures:</p>
<p>Setup: add all available physical memory regions, add reserved to reserved list, sort by base address
Allocation: first fit memory, add to reserved list and merge neighbors if possible
De-allocation: scans reserved list, split up regions if necessary</p>
<h2 id="memblock-boot-allocator"><a class="header" href="#memblock-boot-allocator">Memblock Boot Allocator</a></h2>
<p>Can only allocate memory and maintains an index to the next free block. It's essentially just one long array of bytes.</p>
<h2 id="buddy-allocator"><a class="header" href="#buddy-allocator">Buddy Allocator</a></h2>
<p>Power of two allocator with free coalescing. During allocation, requested size will go into a block that satisfies the size, unused remainders are inevitable. During de-allocation, neighboring buddy block is checked and coalesced if it is free (recursively). MAX_ORDER in linux specifies a power of two coefficient for the maximum number of orders (levels). Works at a per-zone separation.</p>
<h1 id="vmalloc-vs-slab-allocator"><a class="header" href="#vmalloc-vs-slab-allocator">vmalloc vs slab allocator</a></h1>
<ul>
<li>vmalloc
<ul>
<li>plugs in small holes and prevents external fragmentation</li>
<li>is better for very large allocations, since buddy/slab will then cause more external fragmentation</li>
<li>is slower than slab</li>
<li>uses non-contiguous physical memory</li>
<li>has its own range</li>
</ul>
</li>
<li>slab allocator
<ul>
<li>is very fast, since it uses a cache</li>
<li>uses contiguous physical memory</li>
</ul>
</li>
</ul>
<h3 id="fragmentation"><a class="header" href="#fragmentation">Fragmentation</a></h3>
<ul>
<li><strong>External fragmentation</strong> When a request for a large amount of memory comes in, although there might be enough memory for it, it is unable to be allocated due to many disjoint holes of unallocated space.
<ul>
<li>Solved by the <code>vmalloc</code> allocator which sits on top of buddy allocator for large allocations, uses first-fit technique and maps page frames in virtually continuous buffer to scattered pages across physical memory. Allocates a single page from the buddy allocator at a time.</li>
</ul>
</li>
<li><strong>Internal fragmentation</strong> Allocations smaller than 4Kb will always have wasted space, as well as when requests are just above the closest power of two.
<ul>
<li>Addressed with the <code>slab</code> allocator which also sits on top of buddy allocator. For small allocations, continuous in virtual memory as well as physical memory</li>
</ul>
</li>
</ul>
<h3 id="sanity-checks-during-development"><a class="header" href="#sanity-checks-during-development">Sanity Checks during development</a></h3>
<ul>
<li><code>CONFIG_DEBUG_PAGEALLOC</code>
<ol>
<li>Out of bounds detection, adds page guards before and after page which limits how far out of bounds accesses can go. Page canaries will be changed if magic value is changed are also possible.</li>
<li>Use after free detection (<code>kernel_map_pages</code>) simply unmaps virtual memory interrupt handled by MMU, accept for when it is reused again. Can also use page poisoning which lets us lazily detect write-after-frees, however also after page is reused, no longer protected</li>
<li><code>kmemcheck</code> - traps at every read to check if data is initialized, very expensive</li>
<li><code>kmemleak</code> - periodic garbage collection, reports about unlinked objects, false positives can happen</li>
<li><code>kasan</code> - compiler instrumentation, adds combines canary and poison ideas</li>
</ol>
</li>
<li>out of bounds detection only works for off-by-one errors, page-guard vs poison strategy performance difference is non-trivial, but generally page-guards are faster</li>
</ul>
<h1 id="questions-and-answers"><a class="header" href="#questions-and-answers">Questions and Answers</a></h1>
<ul>
<li>
<p>Holes in physical memory are either device mapped or reserved, what reserves them?</p>
<ul>
<li>BIOS reserves memory as well</li>
</ul>
</li>
<li>
<p>might the BIOS reserve memory regions? some holes backed by memory. Some should escape memory management logic</p>
</li>
<li>
<p>Why does the kernel have to use virtual memory addresses in the first place can't it just map directly?</p>
<ul>
<li>needs to provide memory separation for clients</li>
</ul>
</li>
<li>
<p>Padding added to zone struct caching?</p>
<ul>
<li>Cache sharing issues for multicore processors. Ping Pong effect can happen.</li>
</ul>
</li>
<li>
<p>Why do we need zones? - tag memory to differentiate for different purposes surface access only software cares about it, but devices might have hardware limitations.</p>
</li>
<li>
<p>Why do we need  pages? - since hardware provided page granularity</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
